<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="prime.css">
</head>
<body>
    <div id="title">PRIME: the game</div>

    <div class="container">
        <p>Find prime numbers to add them to your score. Fail and your score resets.
        </p>
        <button class = "button">Enter a new Number</button>
        <div>Click or press Spacebar</div>
    </div>

    <div id="mainer">
        <div id="main" class="container">
            <div class="info"> You chose
                <div class= "data" id="number"></div>
            </div>
            <div class = "info"> It is
                <div class = "data" id="primacy"></div>
            </div>
            <div class="info"> Its factors are
                <div class = "data" id="factors"></div>
            </div>
           
        </div>
        <div id="scoreBox" class="container">
            <div id="score" class="data"></div>
            <div id="streak" class="data"></div>
            <div id="chosenPrimes" class="data"></div>
        </div>
    </div>





<script>
    var yourScore = 0;
    var chosenPrimes = [];

const prime = function(){
    console.log(chosenPrimes)
    
    var streak = chosenPrimes.length;

   const number = parseInt(prompt("Enter a number you think is prime."))
    var arr = []
    const fail = "not prime."
    const success = "prime."
    const complicated = "Not prime... it's complicated"


    if (number === 0) {
        mess = complicated
        const oneMessage = document.createElement("div");
        var fact = document.getElementById("factors")

        fact.innerHTML = "INFINITE"
    }
    else if (number === 1){
        mess = complicated;
        const oneMessage = document.createElement("div");
        var fact = document.getElementById("factors")
        fact.innerHTML = ".... just 1"
    }
    else if(chosenPrimes.includes(number)){
        alert("This number has already been selected, please try again");
        mess = success;
    }
    else if (isNaN(number)){
        alert("This is not a number. Please try again.")
    }
    
    else{


        for(i=2;i<number;i++){
            var int = number/i;
            if(Number.isInteger(int)){
                arr.push(` ${int}`);
            }
        }
        arr.reverse();
        console.log(arr);

        if(arr.length === 0){
            var mess = success;
        }
        else{
        
            var mess = fail
        }

        var fact = document.getElementById("factors")
    
        if (arr.length === 0){
            fact.innerHTML = "just 1 and itself."
            yourScore += number
            chosenPrimes.push(` ${number}`);
            streak = chosenPrimes.length;
        }
        else if(arr.length===1){
            fact.innerHTML = `${arr}, it's a perfect square!`
            yourScore = 0;
            chosenPrimes = [];
            streak = 0;
        }
        else{
            fact.innerHTML = arr;
            yourScore = 0;
            chosenPrimes = []; 
            streak = 0;
        }

    }

    var numb = document.getElementById("number")
    numb.innerHTML = ` ${number}`

    var prim = document.getElementById("primacy")
    prim.innerHTML = mess

    var streakBox = document.getElementById("streak");
    streakBox.innerHTML = `Current streak: ${streak}`;

    var primes = document.getElementById("chosenPrimes");
    primes.innerHTML = `Streak primes: ${chosenPrimes}`;

    score.innerHTML = `score: ${yourScore}`;
}
//prime();

const button = document.querySelector("button")
button.addEventListener("click", prime);

document.onkeydown = function (e) {
    if (e.keyCode == 32){
        button.click();
    }
}

</script>

</body>
</html>